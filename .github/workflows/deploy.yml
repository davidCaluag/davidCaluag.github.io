name: Deploy with Secrets

on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Inject API URL into envScience.html
        run: |
          # Replace placeholder in HTML file with the actual API URL from GitHub Secrets
          sed -i 's|<!-- API_URL_PLACEHOLDER -->|window.apiUrl = "${{ secrets.API_URL }}";|g' index.html
          
      - name: Deploy to Railway
        run: |
          # Deploy your code to Railway, assuming you're using a simple static deployment method
          railway up
